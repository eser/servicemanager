!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).servicemanager={})}(this,function(t){"use strict";var e,n=null;function r(){return n}function o(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(u,a)}c((r=r.apply(t,e||[])).next())})}function i(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}function c(t){return Array.from(t.keys())}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length||t[0].constructor!==Function)return new Map(t);var n=new Map;return t[0](n),n}function f(e,n){var r=e.get(n);if(void 0!==r)return r.type!==t.ServiceType.Singleton&&r.target instanceof Function?r.target():r.target}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(e){return f(t,e)})}function s(t,e,n){return o(this,void 0,void 0,function(){var r,o;return i(this,function(i){switch(i.label){case 0:return r=p.apply(void 0,a([t],e)),[4,Promise.all(r)];case 1:return o=i.sent(),[4,n.apply(void 0,a(o))];case 2:return[2,i.sent()]}})})}function y(t,e){var n,r,o=[];try{for(var i=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(t.entries()),a=i.next();!a.done;a=i.next()){var c=u(a.value,2),l=c[0];e(c[1],l)&&o.push(l)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}function v(t,e){return y(t,function(t){return t.tags.indexOf(e)>=0})}(e=t.ServiceType||(t.ServiceType={})).Factory="factory",e.Singleton="singleton";var h=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.map=l.apply(void 0,a(t))}return t.prototype.get=function(t){return f(this.map,t)},t.prototype.getRange=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return p.apply(void 0,a([this.map],t))},t.prototype.ensure=function(t,e){return o(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,s(this.map,t,e)];case 1:return[2,n.sent()]}})})},t.prototype.all=function(){return c(this.map)},t.prototype.filter=function(t){return y(this.map,t)},t.prototype.filterByTag=function(t){return v(this.map,t)},t}();t.ServiceContext=h,t.all=c,t.createContext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new(h.bind.apply(h,a([void 0],t)));return function(t){null===n&&(n=t)}(r),r},t.createMap=l,t.default=r,t.ensure=s,t.factory=function(e,n){return{target:e,type:t.ServiceType.Factory,tags:n||[]}},t.filter=y,t.filterByTag=v,t.get=f,t.getRange=p,t.singleton=function(e,n){return{target:e,type:t.ServiceType.Singleton,tags:n||[]}},t.useServiceManager=r,Object.defineProperty(t,"__esModule",{value:!0})});
